"use strict";flexbe_cli.block.register("ACADEMY_FEED",{lastItem:0,loading:!1,list:[],onScreen:function(t){t&&this.initFit()},initFit:function(){var t=this;this.fitInited=!0,this.$loader=this.$area.find(".updates-loader");var a=-1,i=flexbe_cli.resize.height,e=!1;requestAnimationFrame((function s(){if(requestAnimationFrame(s),t.tween&&t.tween.onscreen&&(!t.fitInited||a!==flexbe_cli.scroll.latest)){a=flexbe_cli.scroll.latest,i=flexbe_cli.resize.height,e=t.loaderState;var l=(t.$loader.offset()||{}).top;t.loaderState=a+i>=l,e!==t.loaderState&&t.loaderState&&t.loadFit()}}))},loadFit:function(t){var a=this;if(void 0===t&&(t=function(){}),!this.loading){this.loading=!0;var i=[];$.ajax({url:"/admin/updates/get_updates",type:"POST",dataType:"json",data:{limit:5,last_id:this.lastItem}}).done((function(e){if(e.is_success&&e.data){var s="",l=-1;e.data.forEach((function(t){var e=a.list.findIndex((function(a){return a.id==t.id}));if(e>=0)l=e,a.list.splice(e,1,t);else{var s=-1===l?a.list.length:l;a.list.splice(s,0,t),i.splice(s,0,t)}})),i.forEach((function(t){s+='<div class="card-item"><div class="date-wrap"><span data-info="data" class="date">',s+=t.date,s+='</span></div><div class="line-wrap"><span class="line line-top"></span><span class="dot"></span><span class="line line-bottom"></span></div><div class="card-wrapper"><div class="img-card">',s+='<img  data-info="img"  src="'+t.image_retina+'">',s+='</div><div class="info"><span  data-info="data"  class="mobile-date">'+t.date+"</span>",s+='<div  data-info="title"  class="title">'+t.title+"</div>",s+='<div  data-info="text"  class="text">'+t.text+"</div>",t.buttons.length&&(s+='<div class="wrap-button">',t.buttons.forEach((function(t){s+='<a href="'+t.url+'"',s+=t.new_window?' target="_blank"':"",s+=' class="gubert-button blue fill select size-l">'+t.title+"</a>"})),s+="</div>"),s+="</div></div></div>"})),a.list.length&&a.$area.find(".updates-loader-wrap").removeClass("zero"),i.length&&a.$area.find(".cards-container").append(s),i.length<5&&(a.$area.find(".updates-loader-wrap").removeClass("active"),a.$area.find(".card-item:last-of-type .line.line-bottom").css("width","0")),a.loading=!1,a.lastItem=a.list[a.list.length-1].id}else t(new Error(e.message))})).fail((function(i){t(new Error(i)),a.loading=!1}))}}});
"use strict";flexbe_cli.block.register("BUNDLE",{selectedTab:void 0,onInit:function(){this.initTabs()},onUpdate:function(t){t.templateRendered&&this.initTabs(!0)},onResize:function(){this.normalizeLines()},initTabs:function(t){var i=this;if(this.$tabsList=this.$area.find(".tabs-list"),this.$mainContainer=this.$area.find(".container-main"),this.$tabsList.length){this.tabInited=!0,this.$tabs=this.$tabsList.find(".tab-wrap"),this.$sections=this.$mainContainer.find(".tab-content");var s=this.selectedTab&&this.$tabs.filter('[data-item-uid="'+this.selectedTab+'"]');s&&s.length||(s=this.$tabs.eq(0)),this.normalizeLines(),this.selectTab(s.attr("data-item-uid"),t),this.$area.on("click",".container-tabs .tab",(function(t){var s=$(t.currentTarget).closest("[data-item-uid]").attr("data-item-uid");i.selectTab(s)})),this.$area.on("bringIntoView",(function(t){var s=$(t.target).closest("[data-item-uid]").attr("data-item-uid");i.selectTab(s)}))}else this.tabInited=!1},selectTab:function(t,i){if(this.tabInited&&(i||this.selectedTab!==t)){this.selectedTab=t;var s=this.$sections.filter('[data-item-uid="'+this.selectedTab+'"]'),a=this.$tabs.filter('[data-item-uid="'+this.selectedTab+'"]');this.scrollToTab(a),this.$tabs.removeClass("active"),this.$sections.removeClass("active"),a.addClass("active"),s.addClass("active");var e=s.find("[data-id]").eq(0)[0]._core;e&&e.updateTweens()}},normalizeLines:function(){if(this.tabInited){var t,i=this.$tabs;this.$tabsList.find(".tab-spacer").remove(),i.removeClass("first-in-line last-in-line"),i.first().addClass("first-in-line"),i.last().addClass("last-in-line"),i.each((function(i,s){t&&t.offsetTop!==s.offsetTop&&($(s).addClass("first-in-line"),$(t).addClass("last-in-line"),$(t).after('<span class="tab-spacer"></span>')),t=s}))}},scrollToTab:function(t){if(this.tabInited){var i=this.$tabsList,s=i[0].scrollWidth;if(s>i[0].offsetWidth){var a,e=t[0].offsetLeft,n=t[0].getBoundingClientRect(),l=flexbe_cli.resize.width;n.width>l||n.left<20?a=e-20:n.right>l-20&&(a=e-(l-20-n.width)),null!=a&&(a=Math.max(0,Math.min(s-l,a)),i.animate({scrollLeft:a},{duration:250}))}}}});
"use strict";flexbe_cli.block.register("CARD",{onUpdate:function(e){this.fixSwiper(e)},fixSwiper:function(e){var i=this;void 0===e&&(e={}),clearTimeout(this._changeTimer);var t=flexbe_cli.components.instances[this.id].find((function(e){return"cards"===e.is})),s=t&&t.swiper;if(!s)return!1;if(document.body.contains(s.el)){if(e.templateRendered&&e&&"items_add"===e.reason){var n=s.realIndex,r=e.reasonData.to,a=n;n+s.params.slidesPerView<=r&&(a=r-s.params.slidesPerView+1),a!==n&&(this._changeTimer=setTimeout((function(){s.slideTo(a)}),30))}e.styleRendered&&s.update(!1)}else this._changeTimer=setTimeout((function(){i.fixSwiper(e)}),16)}});
"use strict";flexbe_cli.block.register("GALLERY",{onUpdate:function(e){var i=this;void 0===e&&(e={}),setTimeout((function(){var s=flexbe_cli.components.instances[i.id].find((function(e){return"cards"===e.is})),r=s&&s.swiper;if(!r)return!1;if(e.templateRendered&&e&&"items_add"===e.reason){var t=r.realIndex,n=e.reasonData.to,a=t;t+r.params.slidesPerView<=n&&(a=n-r.params.slidesPerView+1),a!==t&&r.slideTo(a)}e.styleRendered&&r.update(!1)}),100)}});
"use strict";flexbe_cli.block.register("LOGO",{onUpdate:function(e){var i=this;void 0===e&&(e={}),setTimeout((function(){var s=flexbe_cli.components.instances[i.id].find((function(e){return"cards"===e.is})),r=s&&s.swiper;if(!r)return!1;if(e.templateRendered&&e&&"items_add"===e.reason){var t=r.realIndex,n=e.reasonData.to,a=t;t+r.params.slidesPerView<=n&&(a=n-r.params.slidesPerView+1),a!==t&&r.slideTo(a)}e.styleRendered&&r.update(!1)}),100)}});
"use strict";flexbe_cli.block.register("_flexbe_tariff",{require:["/_s/lib/anime/anime.min.js"],currency:"RUB",currencies:{RUB:/AZ|AM|BY|KZ|KG|MD|RU|TJ|TK|UZ|UA/,EUR:/AX|AD|AT|BE|CY|EE|FI|FR|GF|TF|DE|GR|GP|VA|IE|IT|LV|LT|LU|MT|MQ|YT|MC|ME|NL|PT|RE|BL|MF|PM|SM|SK|SI|ES/,USD:/.*/},onLoad:function(){this.$plans=this.$area.find(".plan-item"),this.$variants=this.$area.find(".plan-variant"),this.setCurrencyFromCookie(),this.setPeriod(),this.bindEvents(),this.updatePlans()},bindEvents:function(){var a=this,e=this.$area.find(".subscribe-select"),t=this.$area.find(".advantage.has-variants"),n=this.$area.find(".plan-variants"),r=this.$area.find(".advantage-tip-icon"),i=function(){$(document).off("click.close-advantage"),t.removeClass("expand")};e.on("click","[data-range]",(function(e){var t=$(e.currentTarget).attr("data-range");a.setPeriod(t),a.updatePlans()})),t.on("click",(function(a){!function(a){a.hasClass("expand")||(a.addClass("expand"),setTimeout((function(){$(document).off("click.close-advantage").on("click.close-advantage",(function(a){$(a.target).closest(".plan-variants").length||i()}))}),20))}($(a.currentTarget))})),n.on("click",".plan-variant",(function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).attr("data-plan"),n=a.$plans.filter('[data-plan-id="'+t+'"]'),r=n.attr("data-variant-id");n.removeClass("is-variant"),n.siblings('[data-variant-id="'+r+'"]').addClass("is-variant"),i(),a.updatePlans()})),r.on("mouseover",(function(a){var e=a.currentTarget.getBoundingClientRect(),t=$(a.currentTarget).find(".advantage-tip"),n=t[0].getBoundingClientRect(),r=window.innerWidth;t.removeClass("top"),t.removeClass("bottom"),t.removeClass("left"),t.removeClass("right"),e.top>n.height+25?t.addClass("top"):t.addClass("bottom"),r-e.x-14<140&&t.addClass("left"),e.x+window.pageXOffset<140&&t.addClass("right")})),flexbe_cli.events.on("update_currency",(function(){a.setCurrencyFromCookie(),a.updatePlans(),flexbe_cli.scroll.scrollTo(a.$area)}))},setPeriod:function(a){void 0===a&&(a="m1"),this.period=a,this.$area.find(".subscribe-select li").removeClass("active").filter("[data-range="+a+"]").addClass("active"),this.$area.find(".subscribe-select .slider").removeClass().addClass("slider "+a)},setCurrencyFromCookie:function(){var a=this,e=this.$area.find(".lang-ru").length?"ru":"en",t="ru"===e?"RU":getCookie("f_country")||"US",n=getCookie("f_currency")||Object.keys(this.currencies).find((function(e){return a.currencies[e].test(t)}));Object.keys(this.currencies).includes(n)||(n="ru"===e?"RUB":"USD"),this.currency=n},getCurrencyParams:function(){var a,e;switch(this.currency){case"RUB":a={str:":value :symbol",t:" ",d:","},e={code:"RUB",symbol:"₽",decimals:2};break;case"EUR":a={str:":symbol:value",t:",",d:"."},e={code:"EUR",symbol:"€",decimals:2};break;default:a={str:":symbol:value",t:",",d:"."},e={code:"USD",symbol:"$",decimals:2}}return{currencyFormat:a,currencyData:e}},updatePlans:function(){var a=this.getCurrencyParams(),e=a.currencyFormat,t=a.currencyData,n=this.period,r=this.currency.toLowerCase(),i=this.$plans,s=this.$variants;i.each((function(a,i){var s=$(i),c=s.find(".plan-price"),l=s.find(".plan-title"),o=s.data("plan"),d=o.prices[r]||{};l.text(o.title);var u=flexbe_cli.locale.parseMoney(c.text())||0,f=d[n],v={value:u},p=Math.abs(u-f)>100;anime({targets:v,value:f,duration:p?600:180,easing:p?"easeInOutExpo":"linear",update:function(){var a=Math.floor(v.value),n=flexbe_cli.locale.formatMoney(a,e,t);c.text(n)}})})),s.each((function(a,s){var c=$(s),l=c.attr("data-plan"),o=i.filter('[data-plan-id="'+l+'"]').data("plan").prices[r][n],d=flexbe_cli.locale.formatMoney(o,e,t);c.find(".plan-variant--price").text(d)})),i.removeAttr("data-plan")}});
"use strict";flexbe_cli.element.register("_flexbe_lang_cur",{onLoad:function(){var e=this,t=this.$area.find(".languages").data("language"),a=getCookie("f_currency")||("ru"===t?"RUB":"USD"),c=this.$area.find(".simple-select"),r=this.$area.find(".currency .option"),n=this.$area.find(".currency-variants");this.current={USD:"$ - USD",EUR:"€ - EUR"},r.text(this.current[a]),c.on("click",".option",(function(t){var a=$(t.delegateTarget).hasClass("active");a||(t.preventDefault(),t.stopPropagation(),e.$area.find(".active").removeClass("active")),$(document).on("click",(function(){$(document).find(".simple-select.active").removeClass("active"),$(document).off("click")})),$(t.delegateTarget).toggleClass("active",!a)})),n.on("click",".currency-variant",(function(t){var a=$(t.currentTarget).attr("data-currency");r.text(e.current[a]),setCookie("f_currency",a),flexbe_cli.events.emit("update_currency",{currency:a})}))}});
"use strict";flexbe_cli.element.register("map01",{onScreen:function(e){var i=this;setInterval(this.resizeTmt),flexbe_cli.is_admin&&e&&(this.resizeTmt=setInterval((function(){var e=i.$area.outerHeight();i.oldHH!==e&&(i.oldHH&&i._onResize({is:i.is,id:i.id,reason:"client_resize"}),i.oldHH=e)}),200))}});
"use strict";flexbe_cli.element.register("media02",{onInit:function(){this.initElement()},onUpdate:function(){this.initElement()},onScreen:function(t){t&&this.needSetSize&&(this.setSize(),this.setClip(this.initial))},onResize:function(){this.inScreen?(this.setSize(),this.setClip(this.position)):this.needSetSize=!0},initElement:function(){this.needSetSize=!0,this.$box=this.$area.find(".state-container"),this.$before=this.$box.find(".state-before"),this.$after=this.$box.find(".state-after"),this.$beforeImage=this.$before.find(".component-image"),this.$afterImage=this.$after.find(".component-image"),this.$handle=this.$box.find(".drag-handle"),this.direction=this.$box.attr("data-direction"),this.initial=this.$box.attr("data-initial")||50,this.clientInited||(this.clientInited=!0,this.position=this.initial,this.$box.addClass("inited")),this.bindEvents()},bindEvents:function(){var t,e,i,n,s=this,o=this.direction,a=this.$box,h=a[0],d=!1,r=!1;function c(r){if(!flexbe_cli.scroll.inScroll&&(!flexbe_cli.is_admin||r.target.closest(".drag-handle"))){var c=a.closest(".swiper-inited")[0];c&&c.swiper&&!n&&(i=c.swiper,n=!0,i.detachEvents()),d=!0,e=h.getBoundingClientRect();var v=r.touches&&r.touches[0]||r;t=m(v,e),a.addClass("drag"),flexbe_cli.is_admin||s.setClip(t),document.body.addEventListener("mousemove",f),document.body.addEventListener("touchmove",f,{passive:!1},!1),window.addEventListener("mouseup",l),window.addEventListener("touchend",l,{passive:!1},!1),"y"===o&&u(r)}}function f(i){if(d){var n=m(i.touches&&i.touches[0]||i,e),h=Math.abs(t-n);if(!r){if(h<.8)return;r=!0,a.addClass("resize")}s.setClip(n),"y"===o&&u(i)}}function l(){d=!1,r=!1,a.removeClass("drag resize"),document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",f),document.removeEventListener("mouseup",l),document.removeEventListener("touchend",l),i&&n&&(n=!1,i.attachEvents())}function u(t){t.preventDefault(),t.stopPropagation()}function m(t,e){return 100*("y"===o?(t.clientY-e.top)/e.height:(t.clientX-e.left)/e.width)}this.$area[0].addEventListener("pointerdown",(function(t){t.stopPropagation()}),!1),h.addEventListener("mousedown",c,{passive:!1},!1),h.addEventListener("touchstart",c,{passive:!1},!1)},setSize:function(){var t=this.direction,e=this.$box["y"===t?"innerHeight":"innerWidth"]();return e=Math.round(e),this.boxSize=e,this.needSetSize=!1,e},setClip:function(t){if(void 0!==t){var e=this.direction,i=this.$before,n=this.$beforeImage,s=this.$after,o=this.$afterImage,a=this.$handle,h="y"===e?"height":"width",d="y"===e?"top":"left";this.position=Math.max(0,Math.min(100,t)),n.css(h,this.boxSize+"px"),o.css(h,this.boxSize+"px"),i.css(h,this.position+"%"),s.css(h,100-this.position+"%"),a.css(d,this.position+"%")}}});
"use strict";var openedSpoiler={},countSpoiler={};flexbe_cli.element.register("spoiler01",{onReady:function(){var e=this;this.$list=this.$area.find(".spoiler-list"),this.$items=this.$area.find(".spoiler-list-item"),this.$lastItem=null,this.isSpoilered=+this.$list.attr("data-spoiler"),countSpoiler[this.id]||(countSpoiler[this.id]=this.$items.length),countSpoiler[this.id]!==this.$items.length&&(openedSpoiler[this.id]=[],countSpoiler[this.id]=this.$items.length),openedSpoiler[this.id]||(openedSpoiler[this.id]=[]),this.isSpoilered?openedSpoiler[this.id].forEach((function(t){var i=t&&e.$list.find('[uid="'+t+'"]');i.length&&e.toggleSpoiler(i,!0,!1)})):openedSpoiler[this.id]=[],this.bindEvents()},bindEvents:function(){var e=this;if(!this.isSpoilered)return!1;var t;this.$list.on("mousedown",".clickable",(function(e){t=(!flexbe_cli.is_admin||!$(e.target).closest(".element-text, .component-image, .editor-overlay").length)&&(!$(e.target).closest(".not-clickable").length&&{target:e.currentTarget,x:e.screenX,y:e.screenY})})),this.$list.on("mouseup",".clickable",(function(i){!t||t.target!==i.currentTarget||flexbe_cli.is_admin&&$(i.target).closest(".element-text").length||(Math.sqrt(Math.pow(t.x-i.screenX,2)+Math.pow(t.y-i.screenY,2))<5&&e.toggleSpoiler($(i.currentTarget)),t=!1)}))},toggleSpoiler:function(e,t,i){void 0===i&&(i=!0);var s=0,n=e.attr("uid");void 0===t?t="true"!==e.attr("data-expanded"):i&&(t=!t),t&&i?openedSpoiler[this.id].push(n):!t&&i&&(openedSpoiler[this.id]=openedSpoiler[this.id].filter((function(e){return e!==n})));var o=e.find(".collapsed");if(!o[0].inAnimation){o[0].inAnimation=!0;var l=e.find(".spoiler-text"),r=l.find(".spoiler-text-content"),a=o[0].scrollHeight,h=i?Math.max(250,Math.min(400,3*a)):0;if(t)(s=(l.height()-r.innerHeight())/2)<10&&r.css("margin",s+"px 0");o.off("transitionend").one("transitionend",(function(){o.css("height","").toggleClass("collapsed--auto",t),o[0].inAnimation=!1})),o.css({height:a+"px",transitionDuration:h+"ms"}),t?o.addClass("collapsed--show"):(o[0].offsetHeight,o.removeClass("collapsed--show").css("height","0")),e.attr("data-expanded",t),this.$lastItem=e}}});
"use strict";flexbe_cli.element.register("timer01",{sizes:{xs:33,s:40,m:55,l:80,xl:1/0},onReady:function(){this.setTimerSize()},onResize:function(){this.setTimerSize()},onScreen:function(e){e&&!this.isViewed&&(this.isViewed=!0,this.setTimerSize())},setTimerSize:function(){var e=this,i=this.$area.find(".component-timer"),t=i.outerWidth()/(i.find(".number").length+i.find(".colon").length),s=Object.keys(this.sizes).find((function(i){return e.sizes[i]>t}));i.attr("data-size",s)}});
"use strict";flexbe_cli.element.register("zone",{onInit:function(){this.setMeta()},onUpdate:function(){this.setMeta()},onResize:function(){this.inScreen&&this.fixElementOrder()},onScreen:function(i){i&&this.fixElementOrder()},setMeta:function(){var i=this.lastViewPort,t=this.lastVisibility;this.lastViewPort=flexbe_cli.resize.width,this.lastVisibility=flexbe_cli.is_admin&&$("body").hasClass("show-hidden"),this.needFix=this.needFix||this.lastViewPort!==i||this.lastVisibility!==t},fixElementOrder:function(){if(this.setMeta(),this.needFix){this.needFix=!1;var i=this.$area.find(".element-item"),t=i.filter(":visible");i.removeClass("is-first-child is-last-child"),t.first().addClass("is-first-child"),t.last().addClass("is-last-child")}}});
"use strict";flexbe_cli.element.register("zone_title",{onInit:function(){this.setMeta()},onUpdate:function(){this.setMeta()},onResize:function(){this.inScreen&&this.fixElementOrder()},onScreen:function(i){i&&this.fixElementOrder()},setMeta:function(){var i=this.lastViewPort,t=this.lastVisibility;this.lastViewPort=flexbe_cli.resize.width,this.lastVisibility=flexbe_cli.is_admin&&$("body").hasClass("show-hidden"),this.needFix=this.needFix||this.lastViewPort!==i||this.lastVisibility!==t},fixElementOrder:function(){if(this.setMeta(),this.needFix){this.needFix=!1;var i=this.$area.find(".element-item"),t=i.filter(":visible");i.removeClass("is-first-child is-last-child"),t.first().addClass("is-first-child"),t.last().addClass("is-last-child")}}});
"use strict";flexbe_cli.modal.register("PAY",{types:{},pay_id:"",hash:"",selectors:{},onLoad:function(){var t=this;this.start(),flexbe_cli.events.on("pay",(function(a,e){e&&"init"===e.action&&t.start()}))},start:function(){this.loadSelectors();var t=this.getPayStatus();if(t){switch(t){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout((function(){flexbe_cli.modal.open("pay")}),300)}},loadSelectors:function(){this.selectors.$container=this.$modal.find(".modal-content"),this.selectors.$bill=this.$modal.find(".action-bill"),this.selectors.$cash=this.$modal.find(".action-cash"),this.selectors.$already=this.$modal.find(".action-already"),this.selectors.$success=this.$modal.find(".action-success"),this.selectors.$fail=this.$modal.find(".action-fail")},getPayStatus:function(){var t=!1;try{t=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(t){}if(!t.pay_id)return!1;if(this.pay_id=t.pay_id,this.hash=t.h,t.pay_status){try{history.pushState(null,null,window.location.pathname)}catch(t){}return t.pay_status}return"pay"},getBillData:function(t){this.pay_id&&!1!==this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done((function(a){"function"==typeof t&&t(a)}))},getBill:function(){var t=this;this.pay_id&&!1!==this.pay_id&&this.getBillData((function(a){if(0===a.status)return!1;t.types=a.pay.support_types,2==+a.pay.pay_status?t.showAlreadyPayed(a.pay):t.cashonly()?t.showCashInstruction(a.pay):t.showBillForm(a.pay)}))},showBillForm:function(t){var a=this;this.selectors.$container.attr("data-type","bill");var e=this.selectors.$bill.find(".pay-methods-list-inner").empty(),s=this.selectors.$container.find(".pay-action"),i=this.selectors.$bill.find(".component-button"),n={cash:"cash",bank_card:"cards",visa:"visa",mastercard:"mastercard",yandex:"yandex",qiwi:"qiwi",webmoney:"webmoney",webmoney_z:"webmoney",webmoney_u:"webmoney",mobile_megafon:"megafon",mobile_beeline:"bee",mobile_mts:"mts",mobile_tele2:"t2",sberbank:"sberbank",bank:"bank",w1:"w1",ibank_robo:"ibank_robo",yandex_kassa:"yandexkassa",yandexkassa:"yandexkassa",bank_company:"bank_company"};Object.entries(this.types).forEach((function(t,a){var s=t[0],i=(t[1],n[s]),o=flexbe_cli.locale.tr("pay.methods."+s),c='<label class="item" data-type="'+s+'" title="'+o+'" for="'+s+'">\n                <input type="radio" name="form[pay_method]" value="'+s+'" id="'+s+'" '+(0===a?'checked="checked"':"")+'>\n                <div class="item-inner">\n                        <span class="check"></span>\n\n                        <span class="icon">\n                            <img class="icon-inner" src="/_s/images/v3/theme/res/pay/'+i+'.svg" />\n                        </span>\n\n                        <span class="item-name font-size-tiny">'+o+"</span>\n                </div>\n            </label>";e.append(c)})),s.find(".title > span.num").text(t.pay_id),s.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum)),e.on("click",".item",(function(t){return t.preventDefault(),$(t.currentTarget).find("input").prop("checked",!0),i.removeClass("disabled"),!1})),i.on("click",(function(t){var s=e.find("input:checked").val();if(!s)return e.removeClass("shake"),setTimeout((function(){e.addClass("shake")}),30),!1;if("cash"===s)return a.showCashInstruction(),!1;var i="/mod/pay/?pay_type="+s+"&pay_id="+a.pay_id+"&h="+a.hash;$(t.currentTarget).attr("href",i),flexbe_cli.run.is_mobile&&flexbe_cli.run.is_OSX||$(t.currentTarget).addClass("submitting")}))},showCashInstruction:function(){this.selectors.$container.attr("data-type","cash"),this.types.cash&&this.types.cash.instruction&&this.selectors.$cash.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed:function(t){this.selectors.$container.attr("data-type","already");var a=this.selectors.$container.find(".pay-action"),e="";"0"!=t.pay_time_done&&t.pay_time_done_formatted&&(e=t.pay_time_done_formatted),this.selectors.$already.find(".text > span.num").text(t.pay_id),a.find(".title > span.num").text(t.pay_id),a.find(".sub > span").text(e),a.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum))},showSuccessAlert:function(){this.selectors.$container.attr("data-type","success"),flexbe_cli.stat.reachGoal(flexbe_cli.stat.goals.pay_done)},showFailAlert:function(){var t=this;this.selectors.$container.attr("data-type","fail"),this.getBillData((function(a){var e=t.selectors.$container.find(".pay-action");e.find(".title > span.num").text(a.pay.pay_id),e.find(".price").text(flexbe_cli.locale.formatMoney(a.pay.pay_sum)),t.selectors.$fail.find(".component-button").off("click").on("click",(function(){t.getBill()}))}))},cashonly:function(){return this.types.cash&&1===Object.keys(this.types).length}});
"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}).apply(this,arguments)}flexbe_cli.widget.register("ANCHORS",{require:["/_s/lib/anime/anime.min.js"],$list:null,onLoad:function(){var t=this;this.$list=this.$widget.find(".anchors-list"),this.list="object"==typeof this.$list.data("anchors")&&this.$list.data("anchors").list||[];var i=_extends({style:1,show_title:0},this.$list.data("anchors"));this.style=i.style,this.show_title=i.show_title,this.$list.removeAttr("data-anchors"),flexbe_cli.run.is_mobile||(this.drawList(),this.bindEvents(),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.anchors").on("layout_change.anchors",(function(i,e){"block"===e.is&&t.drawList()})))},check:function(){var t=flexbe_cli.block.$blocks.not('[data-b-type*="overflow"]');this.list=this.list.filter((function(i){return!(!i.enabled||!t.closest('[data-id="'+i.id+'"]')[0])}))},drawList:function(){var t=this;flexbe_cli.block.$blocks.length||this.$list.hide(),this.check();var i="";flexbe_cli.is_admin&&this.list.length<2?i='<svg style="color: #adadad" width="18" height="98" viewBox="0 0 18 98" xmlns="http://www.w3.org/2000/svg">\n                <g fill="none" fill-rule="evenodd">\n                    <circle opacity=".05" cx="9" cy="5" r="5"/>\n                    <circle opacity=".2" cx="9" cy="25" r="5"/>\n                    <circle opacity=".2" cx="9" cy="73" r="5"/>\n                    <circle opacity=".05" cx="9" cy="93" r="5"/>\n                    <path d="M9 40a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm5.126 9.626h-4.5v4.5H8.34v-4.5h-4.5V48.34h4.5v-4.5h1.286v4.5h4.5v1.286z" opacity=".45"/>\n                </g>\n            </svg>':this.list.length>=2&&(this.list.forEach((function(e){var s=t.show_title&&e.title?' data-title="'+e.title+'"':"";i+="<li"+s+'><a href="#'+e.id+'"></a></li>'})),i+='<li class="helper"><a></a></li>'),this.$list.find("ul").html(i),this.$helper=this.$list.find(".helper"),this.animateList()},animateList:function(){var t=this;if(!(this.list.length<1)){if(flexbe_cli.is_admin)this.$helper.css({opacity:1,transform:"translateY("+24*this.index+"px)"});else{var i=anime({targets:this.$list.find("li").not(this.$helper).get(),duration:350,opacity:[0,1],scale:[.8,1],translateY:[10,0],easing:"easeInOutQuad",autoplay:!1,delay:function(t,i){return 30*i},complete:function(){anime({targets:t.$helper.get(),duration:400,translateY:24*t.index,scale:[2.5,1],opacity:[0,1],easing:"easeInExpo"})}});this.$list.addClass("hide"),setTimeout((function(){t.$list.removeClass("hide"),i.play()}),800)}this.$list.find("li").removeClass("active").eq(this.index).addClass("active")}},index:0,bindEvents:function(){var t=this;flexbe_cli.events.off("entity_event.anchors").on("entity_event.anchors",(function(i,e){var s=e.type,a=e.core,n=e.params;"onFocus"===s&&n.state&&"block"===a.is&&t.setBlock(a)})),flexbe_cli.block.$blocks.each((function(i,e){var s=e._core;s&&s.inFocus&&t.setBlock(s)})),this.$list.on("click","li",(function(t){if(!$(t.target).is("a"))return $(t.currentTarget).find("[href]").trigger("click"),t.preventDefault(),!1}))},setBlock:function(t){this.$list.css("color",t.tween.color);var i=this.index;this.list.some((function(e,s){return+e.id==+t.id&&(i=s,!0)})),(i=Math.max(0,Math.min(this.list.length-1,i)))!==this.index&&(this.animate(i),this.index=i)},animate:function(t){var i=this;if(this.$list.find("li").removeClass("active"),this.$list.find("li").eq(t).addClass("active"),1==+this.style){var e=24*t,s=t-this.index>0?12:-12;anime.remove(this.$helper[0]),anime({targets:this.$helper[0],translateY:e-s,scaleY:2.5,scaleX:.6,duration:100,easing:"easeInQuad",complete:function(){anime({targets:i.$helper[0],translateY:e,scaleY:1,scaleX:1,duration:100,easing:"easeOutQuad"})}})}}});
"use strict";flexbe_cli.widget.register("CART",{list:[],$list:null,$sum:null,$button:null,is_open:!1,onInit:function(){this.$container=this.$widget.find(".widget-data"),this.$list=this.$widget.find(".order-list > ul"),this.$sum=this.$widget.find(".checkout .price"),this.$button=this.$widget.find(".cart-button"),flexbe_cli.is_admin?this.list=[{id:"7832324_1",count:1,img:"/img/1000000945_200.jpg",title:"Product 1",price:750},{id:"7832464_2",count:2,img:"/img/1000000948_200.jpg",title:"Product 2",price:2550}]:this.loadFromStorage(),this.events(),this.popstate(),this.renderList()},onLoad:function(){this.formInit()},onUpdate:function(){this.onInit(),this.is_open&&(this.$container.addClass("fade-in noanimate"),this.open())},formInit:function(){var t=this;flexbe_cli.components.instances[this.id].forEach((function(e){"form"===e.is&&(t.form=e,e.defineBeforeSend((function(){if(!t.list.length)return!1;e&&e.addItems(t.list)})),e.defineAfterSent((function(){t.close(),flexbe_cli.stat.ecommerce.purchase(t.list),t.list=[],t.renderList()})))}))},events:function(){var t=this;flexbe_cli.events.off("cart_command.cart-widget").on("cart_command.cart-widget",(function(e,i){if(i)switch(i.command){case"toggle":t.is_open?t.close():t.open();break;case"open":t.open(i);break;case"close":t.close(i);break;case"add":t.add(i.item);break;case"remove":t.remove(i.id)}})),this.$list.off("click").on("click","[data-action]",(function(e){var i=$(e.currentTarget).closest("li"),s=$(e.currentTarget).data("action"),n=i.data("id");n&&("remove"===s?t.remove(n):t.updateCount(n,s))})),this.$list.off("input").on("input",".count",(function(e){var i=$(e.currentTarget).closest("li").attr("data-id"),s=+e.target.value;s||(s=1,$(e.currentTarget).val(1)),t.updateCount(i,s)})),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",(function(){t.is_open?t.close():t.open()})),this.$container.off("click.close").on("click.close",'a.close, [data-overlay="true"]',(function(e){e.target===e.currentTarget&&t.close()})),$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",(function(e){27===e.which&&t.close()})),$(window).on("popstate",(function(){t.popstate()}))},open:function(){this.is_open=!0,this.renderList(),flexbe_cli.block.pushOverlay("cart",!0),this.oldHash=!1,flexbe_cli.is_admin?this.$container.addClass("is-editor"):(this.$button.addClass("hide"),this.loadFromStorage(),/customer_cart/.test(location.hash)||(/^#{1,2}/.test(location.hash)&&(this.oldHash=location.hash),history.pushState(null,null,"#customer_cart"))),flexbe_cli.scroll.scrollLock.lock(),this.$area.addClass("show"),this.$container.hasClass("noanimate")?(this.$container.addClass("show fade-in"),this.$container.removeClass("noanimate")):(this.$container.addClass("show"),this.$container.outerHeight(),this.$container.addClass("fade-in"),this.$container.removeClass("noanimate")),this._onBeside({state:!0}),this._onScreen({state:!0}),this._onView({state:!0}),this._onFocus({state:!0}),flexbe_cli.events.emit("cart_opened")},close:function(){var t=this;$(window).off("keyup.cart_esc_close"),flexbe_cli.block.removeOverlay("cart"),this.is_open&&(this.is_open=!1,flexbe_cli.scroll.scrollLock.unlock(),this.$area.removeClass("show"),this.$button.removeClass("hide"),this.$container.removeClass("fade-in"),this.$container.addClass("fade-out"),/customer_cart/.test(location.hash)&&(this.oldHash?history.replaceState(null,null,this.oldHash):(flexbe_cli.lockPopstate=!0,history.replaceState(null,null,"#"),flexbe_cli.lockPopstate=!1)),setTimeout((function(){t.$container.removeClass("fade-out show noanimate")}),350),this._onBeside({state:!1}),this._onScreen({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),flexbe_cli.events.emit("cart_closed"))},popstate:function(){var t=this;if(flexbe_cli.is_admin||flexbe_cli.lockPopstate)return!1;setTimeout((function(){/customer_cart/.test(location.hash)?t.open():t.close()}),30)},add:function(t,e){if(void 0===e&&(e=!1),(!this.is_open||e)&&t){t.count=parseInt(t.count,10)||1,t.price=parseFloat(t.price)||0;var i=!1;this.list&&this.list.length&&(this.list=this.list.map((function(e){return e.id===t.id&&(e.count+=t.count,i=!0),e}))),i||this.list.push(t),flexbe_cli.stat.ecommerce.add(t.id,t.title,t.count,t.price),this.renderList();var s=$(".cart-button");s.removeClass("blink"),setTimeout((function(){s.addClass("blink"),setTimeout((function(){s.removeClass("blink")}),300)}),30)}},remove:function(t){if(void 0===t&&(t=!1),!1!==t){var e=this.list.filter((function(e){return e.id==t}))[0];flexbe_cli.stat.ecommerce.remove(e.id,e.title),this.list=this.list.filter((function(e){return e.id!=t})),this.renderList()}},updateCount:function(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e="+"),!1!==t&&(this.list&&this.list.length&&(this.list=this.list.map((function(s){if(s.id==t){"+"===e?s.count+=1:"-"===e&&s.count>1?s.count-=1:(e=parseInt(e,10),s.count=e||1),s.count=parseInt(s.count,10)||1;var n=i.$list.find('[data-id="'+t+'"]');n.find(".price").text(flexbe_cli.locale.formatMoney(s.count*s.price)),"-"!==e&&"+"!==e||n.find(".count").val(s.count),flexbe_cli.stat.ecommerce.add(s.id,s.title,s.count,s.price)}return s}))),this.saveToStorage(),this.renderCount())},renderList:function(){this.saveToStorage(),this.renderCount();var t="";this.list.length?(this.list.forEach((function(e){var i;t+='\n                <li data-id="'+(i=e).id+'">\n                    <div class="img-holder">\n                        <div class="img" '+(i.img?'style="background-image: url('+i.img+')"':"")+'></div>\n                    </div>\n\n                    <div class="content-holder">\n                        <div class="flex-line item-title-outer">\n\n                        <div class="item-title">'+(i.title||"-")+'</div>\n                            <a class="close-times" data-action="remove"></a>\n                        </div>\n\n                        <div class="flex-line item-count-outer">\n                            <div class="item-count">\n                                <a data-action="-"></a>\n                                <input type="number" class="count" min="1" value="'+i.count+'"/>\n                                <a data-action="+"></a>\n                            </div>\n\n                            <div class="item-price text-style-strong">\n                                <span class="price">'+flexbe_cli.locale.formatMoney(i.price*i.count)+"</span>\n                            </div>\n                        </div>\n                    </div>\n                </li>"})),this.$container.removeClass("cart-is-empty")):this.$container.addClass("cart-is-empty"),this.$list.html(t),this.form&&this.form.addItems(this.list),flexbe_cli.events.emit("cart_event",{event:"updateList",sender:"core",list:this.list})},renderCount:function(){var t=0,e=0;this.list.length&&this.list.forEach((function(i){i.count&&(t+=parseInt(i.count,10),i.price&&(e+=parseInt(i.count,10)*parseFloat(i.price)))})),this.count=t,this.sum=e,this.$sum.text(flexbe_cli.locale.formatMoney(e)),this.$container.find(".product-count .count").text(t),$(".cart-button").attr("data-count",t),flexbe_cli.events.emit("cart_event",{event:"updateCount",sender:"core",count:t,sum:e})},loadFromStorage:function(){if(!flexbe_cli.is_admin&&localStorage)try{var t=JSON.parse(localStorage.getItem("f_cart"));t&&t instanceof Array&&(this.list=t)}catch(t){}},saveToStorage:function(){if(!flexbe_cli.is_admin&&localStorage)if(this.list&&this.list instanceof Array)try{localStorage.setItem("f_cart",JSON.stringify(this.list))}catch(t){}else this.list=[]}});
"use strict";!function(){var e={hidden:"hidden-all-m",navCreated:"mobile-navigation--created",cartContainer:"nav-header-controls--cart",burgerContainer:"nav-header-controls--burger"},t={block:".b_block",element:".element-item",nav:".mobile-navigation",header:".header-wrapper",cartBtn:".widget-list .cart-button",navbar:".nav-header",navbarContent:".nav-header-content",navbarControls:".nav-header-controls",navmenu:".nav-menu",navmenuItem:".nav-menu-item"},n=function(n,a){void 0===a&&(a=!1);var i=$(n);if(!i.is(t.element)){var r=i.closest(t.element);i=r.length?r:i}i.toggleClass(e.hidden,!a)};flexbe_cli.widget.register("MENU01",{created:{},onLoad:function(){this.createWidget()},createWidget:function(){var a=this;this.clickEvent="click",this.navbarStyle=!1,this.navmenuCreated=!1;var i=flexbe_cli.block.$list,r=$(t.block);n(i.find("."+e.hidden),!0);var s=r.not(".responsive-hide-mobile").slice(0,3).find(t.header);if((s=s.filter((function(e,t){var n=$(t).offset();return n&&n.top<flexbe_cli.resize.height}))).length){var o=s.eq(0).attr("data-fixed-color")||"light",c=s.eq(0).attr("data-fixed-contrast")||"dark",l=s.eq(0).hasClass("floating-header");this.menuFixed=l,this.cssBackground=o,this.background=o,this.contrast=c,["light","dark"].includes(o)&&(this.cssBackground="light"===o?"#FFF":"#000"),s.length>1&&(s=s.filter((function(e,t){return $(t).attr("data-fixed-contrast")===c})))}if(this.$source=s,this.$nav=this.$area.find(t.nav),this.$navbar=this.$area.find(t.navbar),this.$navmenu=this.$area.find(t.navmenu),this.fillNavmenu(),this.fillNavbar(),this.navbarStyle){if(this.background||this.cssBackground)if(["light","dark"].includes(this.background))this.$nav.attr("data-color",this.background);else if(this.cssBackground){this.$navbar.css("background-color",this.cssBackground),this.$navmenu.css("background-color",this.cssBackground);var d=$("head"),h=d.find('meta[name="theme-color"]');h.length?h.attr("content",this.cssBackground):d.append('<meta name="theme-color" content="'+this.cssBackground+'"/>')}this.contrast?this.$nav.attr("data-contrast",this.contrast):this.color&&this.$nav.css("color",this.color),this.menuFixed&&this.$nav.addClass("menu-fixed"),setTimeout((function(){a.$nav.addClass(e.navCreated+" header-style-"+a.navbarStyle);var t=a.$navbar.outerHeight();a.$source.find(".elements-list").each((function(e,t){t.offsetHeight<40&&n(t.closest(".header-area, .b_block"),!1)})),"panel"===a.navbarStyle&&i.eq(0).css("paddingTop",t+"px")}),30)}this.navmenuCreated&&flexbe_cli.events.off("mobilemenu_command").on("mobilemenu_command",(function(e,t){if(t)switch(t.command){case"toggle":a.toggleMenu();break;case"open":a.openMenu();break;case"close":a.closeMenu()}}))},fillNavbar:function(){var a=this,i=a.created,r=a.$navbar,s=a.$source,o=a.navmenuCreated,c=r.find(t.navbarContent),l=r.find(t.navbarControls);c.empty(),l.empty();var d=[],h=[];return function(){var r=$(t.cartBtn).eq(0);if(r.length){i.cart=!0,h.push("cart"),a.$cart=$('<li class="'+e.cartContainer+'"></li>'),a.$cart.append(r.clone()),n(r,!1),l.append(a.$cart),a.background||(a.color=r.css("color"),a.cssBackground=r.css("background-color"),a.background=a.cssBackground);var s=r.closest(".w_widget"),o=s[0]&&s[0]._core;a.$cart.on(a.clickEvent,(function(){a.toggleMenu(!1),flexbe_cli.events.emit("cart_command",{command:"toggle"})})),flexbe_cli.events.on("cart_event.mobilemenu",(function(e,t){t&&"updateCount"===t.event&&o&&l.toggleClass("cart-empty",!o.count)})),o&&l.toggleClass("cart-empty",!o.count)}else i.cart=!1;i.cart}(),function(){o?(a.$burger=$('<li class="'+e.burgerContainer+'"><i></i><i></i><i></i></li>'),l.append(a.$burger),h.push("burger"),a.$burger.on(a.clickEvent,(function(){a.toggleMenu()})),i.burger=!0):i.burger=!1;i.burger}(),h.length&&function(){var e=s.find(".component-logo").eq(0);if(e.length){var t=40/Math.max(.35,e.innerHeight()/e.innerWidth()),a=e.clone();i.logo=!0,a.css({fontSize:"",maxWidth:t+"px"}),c.append(a),d.push("logo"),n(e,!1)}else i.logo=!1;i.logo}(),d.length&&h.length||h.length>1?this.navbarStyle="panel":0===d.length&&1===h.length?(this.navbarStyle="round",this.menuFixed=!0):this.navbarStyle=!1,{contentCreated:d,controlsCreated:h,style:this.navbarStyle}},fillNavmenu:function(){var e=this.created,a=this.$source;return this.$navmenu.find(t.navmenuItem).each((function(t,i){var r=$(i),s=r.attr("data-element"),o=a.find('[data-e-id="'+s+'"]'),c=o.length;c&&(r.append(o.clone()),r.find('[data-direction="row"]').attr("data-direction","column"),r.find(".element-content").removeClass("justify-content-center justify-content-end").addClass("justify-content-start"),n(o,!1),e[s]=e[s]?e[s]+c:c)})),this.navmenuCreated=Object.keys(e).length,this.navmenuCreated},toggleMenu:function(e){this[(e=void 0===e?!(e=[!0,"true"].includes(this.$nav.attr("data-opened"))):!!e)?"openMenu":"closeMenu"]()},openMenu:function(){var e=this;this.opened=!0,this.$area.addClass("show"),this.$nav.outerHeight(),this.$nav.attr("data-opened",!0),this.$navmenu.addClass("active"),this.$burger&&this.$burger.addClass("active"),flexbe_cli.scroll.scrollLock.lock(),flexbe_cli.block.pushOverlay("mobilemenu"),this.setAreaSize(),$(window).on("resized.mobilemenu",(function(){e.setAreaSize()})),flexbe_cli.run.is_screen_all_mobile&&($("body").addClass("is-widget-open").css("background",this.cssBackground),this.menuFixed||$("body, html").scrollTop(0))},closeMenu:function(){this.opened=!1,flexbe_cli.run.is_screen_all_mobile&&($("body").removeClass("is-widget-open").css("background",""),Array.from(this.$navmenu.find(".folder-item")).forEach((function(e){$(e).removeClass("show"),$(e.lastElementChild).slideUp(0)}))),this.$area.removeClass("show"),this.$area.css("height",""),this.$nav.attr("data-opened",!1),this.$navmenu.removeClass("active"),this.$burger&&this.$burger.removeClass("active"),flexbe_cli.scroll.scrollLock.unlock(),flexbe_cli.block.removeOverlay("mobilemenu"),$(window).off("resized.mobilemenu")},setAreaSize:function(){var e=this.opened?flexbe_cli.resize.height+"px":"";this.$area.css("height",e)}})}();